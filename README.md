# stock_simulator
# 股市模拟交易游戏 README

## 项目简介
本程序是一款基于命令行的股票交易模拟游戏。玩家初始获得10万至20万随机资金，通过买卖股票实现财富增长，目标达到100万元。游戏包含实时行情查看、持仓管理、龙虎榜、自选股、交易记录及存档等功能，提供逼真的股市波动体验。

---

## 主要功能
- **实时市场**：查看20支股票的最新价格、涨跌幅及简介
- **交易系统**：支持买入/卖出操作，自动计算手续费（买入0.03%，卖出0.05%）
- **持仓管理**：实时显示持股盈亏详情
- **事件系统**：随机触发公司基本面事件（利好/利空）
- **基本面分析**：查看股票内在价值、事件影响等关键数据
- **龙虎榜**：每日展示涨幅前五与跌幅前五的股票
- **自选股**：可添加/移除最多20支关注股票
- **存档系统**：支持1000个存档位的保存与读取（完整保存事件状态）
- **交易历史**：记录详细买卖记录与盈亏分析
- **动态模拟**：股票价格基于公司基本面与随机波动生成

---

## 安装与运行
1. **编译程序**
   使用支持C++11的编译器（如g++）：
   ```bash
   g++ -std=c++11 StockGame.cpp -o StockGame
   ```

2. **运行游戏**
   Windows系统双击生成的exe，或命令行执行：
   ```bash
   ./StockGame
   ```

---

## 操作指南

### 主菜单
```
[1] 进行交易    [2] 跳过今日    [3] 查看股票详情    [4] 更多功能
```

### 交易界面
- **查看股票**：输入0-19查看对应股票（显示事件影响和基本面数据）
- **买入/卖出**：选择操作后输入股数
- **最大可买/卖**：系统自动计算当前资金/持仓可操作上限

### 股票详情查看
```
输入股票序号可查看：
- 当前事件及剩余天数
- 基础价值与事件影响系数
- 历史波动率和上涨概率
- 公司类型和详细简介
```

### 更多功能
```
[1] 龙虎榜      [2] 自选股      [3] 重开游戏
[4] 存档        [5] 读档        [6] 交易记录
```

### 快捷键
- `system("pause")` 命令需Windows环境支持
- 输入非法值将触发错误提示并刷新界面

---

## 游戏机制

### 股票波动
- **基础价值**：每5天调整一次公司内在价值（50-150元）
- **事件影响**：随机触发5种公司事件（持续7-15天）：
  | 事件类型   | 影响系数 | 示例                 |
  |------------|----------|----------------------|
  | 重大利好   | +20%     | 签订大额订单         |
  | 政策利好   | +15%     | 行业补贴政策         |
  | 技术突破   | +30%     | 核心技术突破         |
  | 财务危机   | -25%     | 现金流危机           |
  | 重大利空   | -15%     | 产品安全丑闻         |

- **短期波动**：每日价格受随机因素影响，不同板块波动率不同：
  - 科技/传媒类：±20% 
  - 金融/基建类：±10%

### 交易规则
| 项目       | 费率       | 说明                  |
|------------|------------|-----------------------|
| 买入成本   | +0.03%     | 按成交金额计算        |
| 卖出收入   | -0.05%     | 按成交金额扣除        |
| 最小交易单位| 1股        | 支持零散交易          |

### 胜利条件
- **成功**：资产 ≥ 1,000,000 元
- **失败**：资产 ≤ -1 元

---

## 更新日志
### v1.2.0
- **新增公司事件系统**：5种随机事件影响股票基础价值
- **增强存档功能**：完整保存事件状态和基本面数据
- **优化界面显示**：
  - 个股详情页增加事件信息
  - 龙虎榜显示精确涨跌幅
  - 交易记录增加盈亏百分比
- **新增基本面分析**：输入股票序号查看详细数据

### v1.1.12
- 修复已知BUG
- 优化交易记录显示
- 增加自选股数量限制提示

---

## 注意事项
1. 存档文件保存为`game[编号].sav`格式（包含完整事件状态）
2. 程序使用Windows系统命令，建议在Windows环境运行
3. 股票历史数据最多保存10000个交易日
4. 重置游戏将随机获得10-20万初始资金

**提示**：密切关注公司事件和基本面变化，合理配置资产是制胜关键！
